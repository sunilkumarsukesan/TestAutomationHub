name: '2025.07.$(Build.BuildId)'
trigger: none

resources:
  repositories:
    - repository: githubRepo
      type: github
      name: sunilkumarsukesan/TestAutomationHub
      endpoint: sunilkumarsukesan (1)
    - repository: azureRepo
      type: git
      name: learning-devops/_git/webdriver-tests

pool:
  name: 'Default'

stages:
  - stage: Build
    jobs:
      - job: Build
        steps:
          - checkout: azureRepo
          - script: |
              npm run dev
            displayName: 'Build dev App'

  - stage: Dev_Deploy
    dependsOn: Build
    jobs:
      - job: DeployToDev
        steps:
          - script: echo "Deploying to Dev..."

  - stage: Smoke_Tests
    dependsOn: Dev_Deploy
    jobs:
      - job: Smoke
        steps:
          - checkout: githubRepo
          - script: |
              mvn clean test
            displayName: 'Run Smoke Tests'
